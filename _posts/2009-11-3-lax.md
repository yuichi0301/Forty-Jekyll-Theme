---
layout: post
title: XML Schemaの勉強・lax
description: XML Schemaの勉強・lax
---
1.laxを試してみる
このキーワードを指定するとanyの対象となる定義が存在する場合は、
その定義について妥当である必要があり、存在しなければ妥当性検証しません。

2.XML
試してみるXMLは以下のXMLになります。
xml5.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<othello xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="schema4.xsd">
	<game>
		<player>yuichi</player>
	</game>
</othello>
```


3.妥当な場合のスキーマ(定義もあって妥当でもある場合)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
	<xs:element name="othello" type="OthelloType" />
	<xs:complexType name="OthelloType">
		<xs:sequence>
			<xs:element ref="game" maxOccurs="unbounded" />
		</xs:sequence>
	</xs:complexType>
	<xs:element name="game" type="GameType" />
	<xs:complexType name="GameType">
		<xs:sequence>
			<xs:any namespace="##local" processContents="lax" />
		</xs:sequence>
	</xs:complexType>
	<xs:element name="player" type="xs:string" />
</xs:schema>
```


この場合は妥当性検証を通過します。

4.妥当ではないスキーマ(定義はあるが妥当ではない場合)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
	<xs:element name="othello" type="OthelloType" />
	<xs:complexType name="OthelloType">
		<xs:sequence>
			<xs:element ref="game" maxOccurs="unbounded" />
		</xs:sequence>
	</xs:complexType>
	<xs:element name="game" type="GameType" />
	<xs:complexType name="GameType">
		<xs:sequence>
			<xs:any namespace="##local" processContents="lax" />
		</xs:sequence>
	</xs:complexType>
	<xs:element name="player" type="xs:" date />
</xs:schema>
```


この場合player要素の型が日付型になっているのに対して、
XMLは文字列型なのでエラーになります。
次のように出力されました。
「エラー: 5行目
cvc-datatype-valid.1.2.1: 'yuichi' は 'date' の有効な値ではありません。
エラー: 5行目
cvc-type.3.1.3: 要素 'player' の値 'yuichi' が無効です。」

5.妥当な場合のスキーマ(定義が存在しない場合)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
	<xs:element name="othello" type="OthelloType" />
	<xs:complexType name="OthelloType">
		<xs:sequence>
			<xs:element ref="game" maxOccurs="unbounded" />
		</xs:sequence>
	</xs:complexType>
	<xs:element name="game" type="GameType" />
	<xs:complexType name="GameType">
		<xs:sequence>
			<xs:any namespace="##local" processContents="lax" />
		</xs:sequence>
	</xs:complexType>
</xs:schema>
```


この場合は、対象となるplayer要素の定義がないにも関わらず
妥当性検証を通過します。
